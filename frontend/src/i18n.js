import { computed, ref } from 'vue'

const messages = {
  en: {
    brand: 'AIDocGen',
    navGenerator: 'Generator',
    navHistory: 'History',
    navAdmin: 'Admin',
    navApiKeys: 'API Keys',
    navSettings: 'Settings',
    navLogout: 'Logout',
    navToggleLang: '中/En',
    generatorTitle: 'Generate Documentation',
    codeSnippet: 'Code Snippet',
    context: 'Context',
    language: 'Language',
    docFormat: 'Doc Format',
    maxWidth: 'Max Line Width',
    commented: 'Include Comment Wrapper',
    selectionMode: 'Selection Mode',
    submit: 'Generate',
    submitting: 'Generating...',
    errorLoadMeta: 'Failed to load languages or formats.',
    errorRequireCode: 'Code or context is required.',
    jobStatus: 'Job Status',
    jobId: 'ID',
    jobState: 'Status',
    jobReason: 'Reason',
    jobHint: 'Generating documentation, you can edit the next piece of code.',
    jobResult: 'Result',
    preview: 'Preview',
    copy: 'Copy',
    feedbackThanks: 'Thanks for your feedback!',
    feedbackFailed: 'Failed to submit feedback.',
    historyTitle: 'History',
    historyFilters: 'Filters',
    historyKeyword: 'Keyword',
    historyLanguage: 'Language',
    historySource: 'Source',
    historyRefresh: 'Refresh',
    historyEmpty: 'No history yet.',
    historyCTA: 'Generate one now!',
    login: 'Login',
    register: 'Register',
    email: 'Email',
    emailLabel: 'Email',
    username: 'Username',
    password: 'Password',
    confirmPassword: 'Confirm Password',
    role: 'Role',
    createdAt: 'Created At',
    actions: 'Actions',
    keyPartial: 'Key (Partial)',
    needAccount: 'Need an account? Register',
    alreadyAccount: 'Already have an account? Login',
    loginFailed: 'Login failed',
    registerFailed: 'Registration failed',
    passwordMismatch: "Passwords don't match",
    adminUserTitle: 'Admin - User Management',
    adminApiKeyTitle: 'API Keys',
    createKey: 'Create New Key',
    delete: 'Delete',
    confirmDelete: 'Are you sure you want to delete this key?',
    settings: 'Settings',
    refresh: 'Refresh',
    edit: 'Edit',
    quota: 'Quota',
    purpose: 'Purpose',
    firstName: 'First Name',
    lastName: 'Last Name',
    rawKey: 'Raw Key',
    model: 'Model',
    source: 'Source',
    feedback: 'Feedback',
    viewDetail: 'View detail',
    close: 'Close',
    save: 'Save',
    cancel: 'Cancel',
    theme: 'Theme',
    light: 'Light',
    dark: 'Dark',
    system: 'System',
    languageToggleLabel: 'Language',
    loadFailed: 'Load failed'
  },
  zh: {
    brand: 'AIDocGen',
    navGenerator: '生成器',
    navHistory: '历史',
    navAdmin: '管理员',
    navApiKeys: 'API Key',
    navSettings: '设置',
    navLogout: '退出登录',
    navToggleLang: '中/En',
    generatorTitle: '生成文档',
    codeSnippet: '代码片段',
    context: '上下文',
    language: '语言',
    docFormat: '文档格式',
    maxWidth: '最大行宽',
    commented: '自动包裹注释',
    selectionMode: '选区模式',
    submit: '生成',
    submitting: '生成中...',
    errorLoadMeta: '加载语言或格式失败',
    errorRequireCode: '代码或上下文必填一项',
    jobStatus: '任务状态',
    jobId: '任务 ID',
    jobState: '状态',
    jobReason: '原因',
    jobHint: '生成中，可继续编辑下一段代码',
    jobResult: '生成结果',
    preview: '预览',
    copy: '复制',
    feedbackThanks: '感谢反馈！',
    feedbackFailed: '反馈失败',
    historyTitle: '历史记录',
    historyFilters: '筛选',
    historyKeyword: '关键字',
    historyLanguage: '语言',
    historySource: '来源',
    historyRefresh: '刷新',
    historyEmpty: '暂无历史',
    historyCTA: '去生成一条！',
    login: '登录',
    register: '注册',
    email: '邮箱',
    emailLabel: '邮箱',
    username: '用户名',
    password: '密码',
    confirmPassword: '确认密码',
    role: '角色',
    createdAt: '创建时间',
    actions: '操作',
    keyPartial: 'Key (部分显示)',
    needAccount: '没有账号？去注册',
    alreadyAccount: '已有账号？去登录',
    loginFailed: '登录失败',
    registerFailed: '注册失败',
    passwordMismatch: '两次密码不一致',
    adminUserTitle: '管理员 - 用户管理',
    adminApiKeyTitle: 'API Keys',
    createKey: '创建新 Key',
    delete: '删除',
    confirmDelete: '确认删除该 Key？',
    settings: '设置',
    refresh: '刷新',
    edit: '编辑',
    quota: '配额',
    purpose: '用途',
    firstName: '名',
    lastName: '姓',
    rawKey: '原始 Key',
    model: '模型',
    source: '来源',
    feedback: '反馈',
    viewDetail: '查看详情',
    close: '关闭',
    save: '保存',
    cancel: '取消',
    theme: '主题',
    light: '亮色',
    dark: '暗色',
    system: '跟随系统',
    languageToggleLabel: '语言',
    loadFailed: '加载失败'
  }
}

const currentLang = ref('zh')

export function useI18n() {
  const t = (key) => messages[currentLang.value][key] ?? key
  const setLang = (lang) => {
    currentLang.value = lang
  }
  const lang = computed(() => currentLang.value)
  return { t, lang, setLang }
}
